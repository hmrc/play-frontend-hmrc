@*
 * Copyright 2023 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.govukfrontend.views.Aliases.Hint
@import uk.gov.hmrc.govukfrontend.views.html.components.{GovukButton, GovukRadios}
@import uk.gov.hmrc.govukfrontend.views.viewmodels.button.Button
@import uk.gov.hmrc.govukfrontend.views.viewmodels.content.Text
@import uk.gov.hmrc.govukfrontend.views.viewmodels.fieldset.{Fieldset, Legend}
@import uk.gov.hmrc.govukfrontend.views.viewmodels.radios.{RadioItem, Radios}
@import uk.gov.hmrc.hmrcfrontend.views.viewmodels.addtoalist.AddToAList
@import uk.gov.hmrc.govukfrontend.views.html.components.{FormWithCSRF => PlayFrontendFormWithCSRF}
@import uk.gov.hmrc.hmrcfrontend.views.viewmodels.listwithactions.{ListWithActions, ListWithActionsItem, ListWithActionsAction}
@import uk.gov.hmrc.hmrcfrontend.views.html.components.HmrcListWithActions

@this(
    govukRadios: GovukRadios,
    govukButton: GovukButton,
    formWithCsrf: PlayFrontendFormWithCSRF,
    hmrcListWithActions: HmrcListWithActions
)

@(params: AddToAList)(implicit messages: Messages, request: RequestHeader)
@import params._

<h1 class="govuk-heading-xl">@{itemList.length match {
    case 0 => messages("hmrc.addtoalist.zeroitems")
    case 1 => messages("hmrc.addtoalist.oneitem")
    case _ => messages("hmrc.addtoalist.multipleitems", itemList.length)
  }}</h1>

<div class="govuk-form-group">
  @hmrcListWithActions(ListWithActions(items = itemList map (item => ListWithActionsItem(
    name = Text(item.name),
    actions = Seq(
        ListWithActionsAction(
            content = Text(messages("hmrc.addtoalist.change")),
            visuallyHiddenText = Some(messages("hmrc.addtoalist.change.visuallyhidden", item.name)),
            href= item.changeUrl
        ),
        ListWithActionsAction(
            content = Text(messages("hmrc.addtoalist.remove")),
            visuallyHiddenText = Some(messages("hmrc.addtoalist.remove.visuallyhidden", item.name)),
            href= item.removeUrl
        )
      ))),
    classes = s"hmrc-list-with-actions--${itemSize.suffix}"
  ))
</div>
@defining(params.formAction.getOrElse("")) { action =>
  @formWithCsrf(action = Call("post", action)) {
    @govukRadios(Radios(
      fieldset = Some(Fieldset(
        legend = Some(Legend(
          content = Text(messages("hmrc.addtoalist.addanother")),
          classes = "govuk-fieldset__legend govuk-fieldset__legend--m",
          isPageHeading = false
        ))
      )),
      hint = Some(Hint(content = Text(hintText.getOrElse("")))),
      idPrefix = Some("add-another"),
      name = "add-another",
      items = Seq(
        RadioItem(
          content = Text(messages("radios.yesnoitems.yes")),
          value = Some("Yes")
        ),
        RadioItem(
          content = Text(messages("radios.yesnoitems.no")),
          value = Some("No")
        )
      ),
      classes = "govuk-radios--inline"
    ))

    @govukButton(Button(content = Text(messages("hmrc.addtoalist.continue"))))
  }
}
