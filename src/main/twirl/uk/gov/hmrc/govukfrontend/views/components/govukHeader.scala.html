@*
 * Copyright 2021 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.govukfrontend.controllers.routes

@this()

@(params: Header = Header())
@import params._
<header class="govuk-header @classes" role="banner" data-module="govuk-header"@toAttributes(attributes)>
  <div class="govuk-header__container @containerClasses.getOrElse("govuk-width-container")">
    <div class="govuk-header__logo">
      <a href="@homepageUrl.getOrElse{/}" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__logotype">
          <!--[if gt IE 8]><!-->
          @* We use an inline SVG for the crown so that we can cascade the
          currentColor into the crown whilst continuing to support older browsers
          which do not support external SVGs without a Javascript polyfill. This
          adds approximately 1kb to every page load.

          We use currentColour so that we can easily invert it when printing and
          when the focus state is applied. This also benefits users who override
          colours in their browser as they will still see the crown.

          The SVG needs `focusable="false"` so that Internet Explorer does not
          treat it as an interactive element - without this it will be
          'focusable' when using the keyboard to navigate. *@
          <svg
            aria-hidden="true"
            focusable="false"
            class="govuk-header__logotype-crown"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 132 97"
            height="30"
            width="36"
          >
            <path
              fill="currentColor" fill-rule="evenodd"
              d="M25 30.2c3.5 1.5 7.7-.2 9.1-3.7 1.5-3.6-.2-7.8-3.9-9.2-3.6-1.4-7.6.3-9.1 3.9-1.4 3.5.3 7.5 3.9 9zM9 39.5c3.6 1.5 7.8-.2 9.2-3.7 1.5-3.6-.2-7.8-3.9-9.1-3.6-1.5-7.6.2-9.1 3.8-1.4 3.5.3 7.5 3.8 9zM4.4 57.2c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.5-1.5-7.6.3-9.1 3.8-1.4 3.5.3 7.6 3.9 9.1zm38.3-21.4c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.6-1.5-7.6.3-9.1 3.8-1.3 3.6.4 7.7 3.9 9.1zm64.4-5.6c-3.6 1.5-7.8-.2-9.1-3.7-1.5-3.6.2-7.8 3.8-9.2 3.6-1.4 7.7.3 9.2 3.9 1.3 3.5-.4 7.5-3.9 9zm15.9 9.3c-3.6 1.5-7.7-.2-9.1-3.7-1.5-3.6.2-7.8 3.7-9.1 3.6-1.5 7.7.2 9.2 3.8 1.5 3.5-.3 7.5-3.8 9zm4.7 17.7c-3.6 1.5-7.8-.2-9.2-3.8-1.5-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.3 3.5-.4 7.6-3.9 9.1zM89.3 35.8c-3.6 1.5-7.8-.2-9.2-3.8-1.4-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.4 3.6-.3 7.7-3.9 9.1zM69.7 17.7l8.9 4.7V9.3l-8.9 2.8c-.2-.3-.5-.6-.9-.9L72.4 0H59.6l3.5 11.2c-.3.3-.6.5-.9.9l-8.8-2.8v13.1l8.8-4.7c.3.3.6.7.9.9l-5 15.4v.1c-.2.8-.4 1.6-.4 2.4 0 4.1 3.1 7.5 7 8.1h.2c.3 0 .7.1 1 .1.4 0 .7 0 1-.1h.2c4-.6 7.1-4.1 7.1-8.1 0-.8-.1-1.7-.4-2.4V34l-5.1-15.4c.4-.2.7-.6 1-.9zM66 92.8c16.9 0 32.8 1.1 47.1 3.2 4-16.9 8.9-26.7 14-33.5l-9.6-3.4c1 4.9 1.1 7.2 0 10.2-1.5-1.4-3-4.3-4.2-8.7L108.6 76c2.8-2 5-3.2 7.5-3.3-4.4 9.4-10 11.9-13.6 11.2-4.3-.8-6.3-4.6-5.6-7.9 1-4.7 5.7-5.9 8-.5 4.3-8.7-3-11.4-7.6-8.8 7.1-7.2 7.9-13.5 2.1-21.1-8 6.1-8.1 12.3-4.5 20.8-4.7-5.4-12.1-2.5-9.5 6.2 3.4-5.2 7.9-2 7.2 3.1-.6 4.3-6.4 7.8-13.5 7.2-10.3-.9-10.9-8-11.2-13.8 2.5-.5 7.1 1.8 11 7.3L80.2 60c-4.1 4.4-8 5.3-12.3 5.4 1.4-4.4 8-11.6 8-11.6H55.5s6.4 7.2 7.9 11.6c-4.2-.1-8-1-12.3-5.4l1.4 16.4c3.9-5.5 8.5-7.7 10.9-7.3-.3 5.8-.9 12.8-11.1 13.8-7.2.6-12.9-2.9-13.5-7.2-.7-5 3.8-8.3 7.1-3.1 2.7-8.7-4.6-11.6-9.4-6.2 3.7-8.5 3.6-14.7-4.6-20.8-5.8 7.6-5 13.9 2.2 21.1-4.7-2.6-11.9.1-7.7 8.8 2.3-5.5 7.1-4.2 8.1.5.7 3.3-1.3 7.1-5.7 7.9-3.5.7-9-1.8-13.5-11.2 2.5.1 4.7 1.3 7.5 3.3l-4.7-15.4c-1.2 4.4-2.7 7.2-4.3 8.7-1.1-3-.9-5.3 0-10.2l-9.5 3.4c5 6.9 9.9 16.7 14 33.5 14.8-2.1 30.8-3.2 47.7-3.2z"
            ></path>
          </svg>
          <!--<![endif]-->
          <!--[if IE 8]>
          <img src="@calculateAssetPath(assetsPath, "images/govuk-logotype-crown.png")" class="govuk-header__logotype-crown-fallback-image" width="36" height="32">
          <![endif]-->
          <span class="govuk-header__logotype-text">
            GOV.UK
          </span>
        </span>
        @productName.mapNonEmpty { productName =>
          <span class="govuk-header__product-name">
            @productName
          </span>
        }
      </a>
    </div>
    @(serviceName, navigation) match {
      case (Some(NonEmptyString(_)), _) | (_, Some(_)) => {
        <div class="govuk-header__content">
          @serviceName.mapNonEmpty { serviceName =>
            <a href="@serviceUrl" class="govuk-header__link govuk-header__link--service-name">
              @serviceName
            </a>
          }
          @navigation.map { navigation =>
            <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation"
              aria-label="@params.menuButtonLabel.getOrElse("Show or hide navigation menu")">Menu</button>
            <nav>
              <ul id="navigation" class="govuk-header__navigation @navigationClasses" aria-label="@params.navigationLabel.getOrElse("Navigation menu")">
                @for(item <- navigation) {
                  @if((item.text.nonEmpty || item.content.nonEmpty)) {
                    <li class="govuk-header__navigation-item@if(item.active) { govuk-header__navigation-item--active}">
                      @if(isNonEmptyOptionString(item.href)) {
                        <a class="govuk-header__link" href="@item.href"@toAttributes(item.attributes)>
                          @if(item.content.nonEmpty) { @item.content.asHtml } else { @item.text }
                        </a>
                      } else {
                        @if(item.content.nonEmpty) { @item.content.asHtml } else { @item.text }
                      }
                    </li>
                  }
                }
              </ul>
            </nav>
          }
        </div>
      }
      case _ => {}
    }
  </div>
</header>

